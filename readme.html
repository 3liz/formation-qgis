<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Made with Remarkable!
  </title>
  <link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css" rel="stylesheet"/>
  <style type="text/css">
   body,table tr{background-color:#fff}table tr td,table tr th{border:1px solid #ccc;text-align:left;padding:6px 13px;margin:0}pre code,table,table tr{padding:0}hr,pre code{background:0 0}body{font:16px Helvetica,Arial,sans-serif;line-height:1.4;color:#333;word-wrap:break-word;padding:10px 15px}strong,table tr th{font-weight:700}h1{font-size:2em;margin:.67em 0;text-align:center}h2{font-size:1.75em}h3{font-size:1.5em}h4{font-size:1.25em}h1,h2,h3,h4,h5,h6{font-weight:700;position:relative;margin-top:15px;margin-bottom:15px;line-height:1.1}h1,h2{border-bottom:1px solid #eee}hr{height:0;margin:15px 0;overflow:hidden;border:0;border-bottom:1px solid #ddd}a{color:#4183C4}a.absent{color:#c00}ol,ul{padding-left:15px;margin-left:5px}ol{list-style-type:lower-roman}table tr{border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#aaa}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td:last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}blockquote{padding:0 15px;border-left:4px solid #ccc}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;white-space:pre;border:none}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}
  </style>
 </head>
 <body>
  <h1>
   Formation QGIS
  </h1>
  <h2>
   Pré-requis
  </h2>
  <p>
   Cette formation concerne des utilisateurs ayant des connaissance en SIG et qui souhaitent apprendre à utiliser QGIS :
  </p>
  <ul>
   <li>
    Découverte de l'interface de QGIS
   </li>
   <li>
    Ouverture d'une couche vecteur
   </li>
   <li>
    Symbologie vecteur
   </li>
   <li>
    Étiquetage
   </li>
   <li>
    Requêtage simple sur une couche vecteur
   </li>
   <li>
    Mise en page d'une carte pour un export PDF
   </li>
  </ul>
  <p>
   Nous allons réaliser une carte communale présentant :
  </p>
  <ul>
   <li>
    les limites de communes
   </li>
   <li>
    les principaux axes de communication
   </li>
   <li>
    l'occupation du sol
   </li>
  </ul>
  <p>
   Le PDF devra contenir :
  </p>
  <ul>
   <li>
    un titre
   </li>
   <li>
    la carte
   </li>
   <li>
    une légende
   </li>
   <li>
    une flèche Nord
   </li>
   <li>
    une échelle
   </li>
   <li>
    les sources
   </li>
  </ul>
  <p>
   Pour suivre la formation, il faut:
  </p>
  <ul>
   <li>
    Avoir QGIS 3.4 minimum
   </li>
   <li>
    Avoir un jeu de données, par exemple:
    <ul>
     <li>
      Données OSM à l'aide du plugin QuickOSM
     </li>
     <li>
      Données
      <a href="https://github.com/igeofr/osm2igeo">
       OSM2Igeo
      </a>
      (utilisation de ce jeu de données ci-après dans la formation)
     </li>
    </ul>
   </li>
  </ul>
  <h2>
   Interface de QGIS
  </h2>
  <p>
   <img alt="Interface de QGIS" src="./media/interface.png"/>
  </p>
  <h2>
   Ouverture d'une couche vecteur
  </h2>
  <p>
   <img alt="Ouverture couche vecteur" src="./media/layer_toolbar.png"/>
  </p>
  <ul>
   <li>
    À l'aide de l'icône
    <code>
     plus
    </code>
    dans la barre d'outil ci-dessus
    <code>
     Source de données
    </code>
    , ajoutons une couche
    <code>
     Vecteur
    </code>
    de type
    <code>
     Fichier
    </code>
    .
    <ul>
     <li>
      <code>
       201909_11_ILE_DE_FRANCE_SHP_L93_2154 / H_OSM_ADMINISTRATIF / COMMUNE.shp
      </code>
     </li>
    </ul>
   </li>
   <li>
    <em>
     Pour info
    </em>
    , dans les barres d'outils, les étoiles jaunes signifient la création de nouvelle couche.
    <br/>
    Dans notre cas, nous souhaitons donc bien l'ajout d'une couche existante.
   </li>
   <li>
    Enregistrer le projet
    <code>
     Projet
    </code>
    -&gt;
    <code>
     Enregistrer sous...
    </code>
    et mettez le
    <strong>
     à côté
    </strong>
    du dossier
    <code>
     201909_11_ILE_DE_FRANCE_SHP_L93_2154
    </code>
    .
   </li>
   <li>
    Désormais, l'aide du panneau
    <code>
     Explorateur
    </code>
    , dans
    <code>
     Dossier du projet
    </code>
    :
    <ul>
     <li>
      Charger
      <code>
       D_OSM_HYDROGRAPHIE
      </code>
      ,
      <code>
       RESERVOIR_EAU.shp
      </code>
     </li>
     <li>
      Charger
      <code>
       A_OSM_RESEAU_ROUTIER
      </code>
      ,
      <code>
       ROUTE.shp
      </code>
     </li>
    </ul>
   </li>
  </ul>
  <h2>
   Requêtage simple sur une couche vecteur
  </h2>
  <ul>
   <li>
    La couche commune comportent de nombreuses entités. On peut le voir graphiquement sur le canevas de la carte,
    <br/>
    mais aussi en ouvrant sa table attributaire.
   </li>
  </ul>
  <p>
   <img alt="Barre outil vecteur" src="./media/vector_toolbar.png"/>
  </p>
  <ul>
   <li>
    Pensez-bien à sélectionner votre couche dans la légende. Cela active ou non les actions dans la barre d'outils ci-dessus.
   </li>
   <li>
    À l'aide de l'outil
    <code>
     Identifier les entités
    </code>
    dans la barre d'outils, faire un clic sur une entité.
    <ul>
     <li>
      Un nouveau panneau s'ouvre présentant les résultats.
     </li>
    </ul>
   </li>
   <li>
    Depuis cette barre d'outils, ouvrir la
    <code>
     table attributaire
    </code>
    .
   </li>
   <li>
    <em>
     Pour info
    </em>
    , le jaune dans les icônes représentent très souvent la notion de sélection dans QGIS.
   </li>
   <li>
    Utilisons l'outil de sélection à l'aide de la souris et affichons les entités sélectionnées dans la table.
   </li>
   <li>
    <p>
     Utilisons l'icône avec un carré jaune et un epsilon (le
     <code>
      ε
     </code>
     ) afin de construire une expression de sélection.
    </p>
    <ul>
     <li>
      Cette icône se trouve dans la barre d'outils ci-dessus de la fenêtre principale
     </li>
     <li>
      ou dans la nouvelle fenêtre de la table attributaire.
     </li>
    </ul>
   </li>
   <li>
    <p>
     On souhaite pouvoir sélectionner le(s) entité(s) qui répondent au critère
     <code>
      "CODE_INSEE" = '77251'
     </code>
     , pour cela utiliser
     <br/>
     l'interface graphique afin de construire la requête. Que remarquons-nous sur la structure de l'expression ?
    </p>
    <ul>
     <li>
      Les nom des champs sont entre
      <code>
       ""
      </code>
     </li>
     <li>
      Les chaînes de caractères dans les cellules sont entre
      <code>
       ''
      </code>
      .
     </li>
    </ul>
   </li>
   <li>
    On souhaite désormais toutes les communes dont :
    <ul>
     <li>
      le code INSEE commence par
      <code>
       77
      </code>
      à l'aide de l'opérateur
      <code>
       like
      </code>
      :
      <ul>
       <li>
        Le pourcentage permet de faire un caractère "joker" remplacant n'importe quelle chaîne de caractères
       </li>
       <li>
        Solution :
        <code>
         "CODE_INSEE" like '77%'
        </code>
       </li>
      </ul>
     </li>
     <li>
      la population est inférieur à 1000 habitants :
      <ul>
       <li>
        Les populations sont au format texte et non nombre entier :
        <code>
         to_int
        </code>
       </li>
       <li>
        Solution :
        <code>
         to_int( "POPUL" ) &lt; 1000
        </code>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
  <h2>
   Enregistrer le résultat d'une sélection en tant que nouvelle couche
  </h2>
  <ul>
   <li>
    On peut enregistrer la sélection de la commune dans une nouvelle couche de données en faisant un clic-droit sur la couche puis
    <code>
     Exporter
    </code>
    .
   </li>
   <li>
    Choisir un format pour l'export, par exemple
    <code>
     ESRI Shapefile
    </code>
    . On peut aussi choisir de faire une reprojection des données.
   </li>
  </ul>
  <p>
   <strong>
    Attention
   </strong>
   , dans la fenêtre pour exporter les entités,
   <strong>
    toujours
   </strong>
   utiliser les trois petits points lors de la saisie du nom de fichier !
  </p>
  <p>
   <img alt="Exporter couche vecteur" src="./media/save_as.png"/>
  </p>
  <h2>
   Symbologie vecteur
  </h2>
  <h3>
   Les types de symbologies
  </h3>
  <ul>
   <li>
    On accède aux propriétés de la couche vecteur en faisant un double clic dans la légende,
    <br/>
    ou alors un clic-droit dans la légende, puis sur
    <code>
     Propriétés
    </code>
    .
   </li>
   <li>
    QGIS propose plusieurs onglets, rendons nous dans
    <code>
     Symbologie
    </code>
    .
   </li>
  </ul>
  <p>
   Le premier menu déroulant propose le type de symbologie :
  </p>
  <ul>
   <li>
    Aucun symbole
   </li>
   <li>
    Symbole unique : un seul et même symbole pour chacune des entités.
   </li>
   <li>
    Catégorisé : un symbole pour chaque valeur unique d'un champ particulier. Il faut un champ ayant un ensemble fini de valeur.
    <br/>
    Par exemple, le type d'une route, il s'agit de quelques valeurs :
    <code>
     Autoroute
    </code>
    ,
    <code>
     National
    </code>
    ,
    <code>
     Départemental
    </code>
    ,
    <code>
     Communale
    </code>
    ,
    <code>
     Piste forestière
    </code>
    .
   </li>
   <li>
    Gradué : Contrairement à la méthode catégorisé, il s'agit ici une liste de valeurs non définies, discrètes.
    <br/>
    Par exemple, une population, il n'existe pas une liste de valeurs connues à l'avance, la population peut-être de 20, 784, 12600 ou encore 230 000 habitants.
   </li>
   <li>
    Ensemble de règles
   </li>
   <li>
    Polygones inversés (
    <em>
     polygones seulement
    </em>
    ) : pour inverser géométriquement les polygones. Il s'agit d'un cas un peu particulier.
   </li>
   <li>
    2.5D (
    <em>
     polygones seulement
    </em>
    ) : donner un effet de 3D à des bâtiments.
   </li>
  </ul>
  <h3>
   Faire notre style
  </h3>
  <ul>
   <li>
    Pour la couche communes, nous allons appliquer :
    <ul>
     <li>
      un
      <code>
       symbole unique
      </code>
     </li>
     <li>
      <code>
       Couleur de remplissage
      </code>
      , mettre transparent.
     </li>
    </ul>
   </li>
   <li>
    Pour la couche routes:
    <ul>
     <li>
      une
      <code>
       catégorisation
      </code>
      sur le champ
      <code>
       NATURE
      </code>
     </li>
     <li>
      cliquer sur
      <code>
       classer
      </code>
      pour créer la classification
     </li>
     <li>
      double-cliquer dans la colone
      <code>
       Symbole
      </code>
      ayant un fort trafic :
     </li>
     <li>
      choisir le style
      <code>
       topo_main_road
      </code>
     </li>
    </ul>
   </li>
  </ul>
  <h2>
   Étiquetage
  </h2>
  <ul>
   <li>
    <p>
     Les étiquettes sont utilisées pour afficher du texte sur la carte : le nom des rues, afficher la superficie d'une commune etc.
    </p>
   </li>
   <li>
    <p>
     Nous allons faire un étiquetage simple sur la couche
     <code>
      communes
     </code>
     :
    </p>
    <ul>
     <li>
      Se rendre dans l'onglet
      <code>
       Étiquettes
      </code>
      dans les propriétés de la couche vecteur :
     </li>
    </ul>
   </li>
  </ul>
  <p>
   <img alt="Étiquettes" src="./media/labels.png"/>
  </p>
  <ul>
   <li>
    Choisir :
    <ul>
     <li>
      <code>
       Étiquettes simples
      </code>
     </li>
     <li>
      <code>
       Étiquetter avec
      </code>
      le nom du champ que l'on souhaite afficher.
     </li>
    </ul>
   </li>
   <li>
    Choisir une taille de police adaptée
   </li>
   <li>
    Ajouter une petite zone tampon (un liséré blanc)
   </li>
   <li>
    <p>
     Définir des seuils de visibilités dans l'onglet
     <code>
      Rendu
     </code>
     .
    </p>
   </li>
   <li>
    <p>
     <strong>
      Bonus
     </strong>
     , afficher une information calculée à la volée, comme la superficie de la commune en km² :
    </p>
    <ul>
     <li>
      La superficie en anglais se dit
      <code>
       area
      </code>
      .
     </li>
     <li>
      La projection de la couche est actuellement en m².
     </li>
     <li>
      Solution partielle
      <code>
       $area / 1000000
      </code>
     </li>
     <li>
      Solution finale
      <code>
       concat("NOM", ' ', round($area / 1000000, 2), ' km²')
      </code>
     </li>
    </ul>
   </li>
  </ul>
  <h2>
   Outil d'analyse vecteur
  </h2>
  <ul>
   <li>
    QGIS propose de nombreux algorithmes d'analyse spatiale.
   </li>
   <li>
    Nous allons utiliser l'algorithme
    <code>
     Extraire par localisation
    </code>
    /
    <code>
     Sélection par localisation
    </code>
    afin de récupérer seulement les troncons de route qui
    <code>
     intersectent
    </code>
    la commune.
   </li>
  </ul>
  <h2>
   Mise en page d'une carte pour un export PDF
  </h2>
  <ul>
   <li>
    Une
    <code>
     Mise en page
    </code>
    dans QGIS consiste faire une carte en respectant les règles cartographiques puis de faire un export PDF.
   </li>
   <li>
    Le PDF devra contenir :
    <ul>
     <li>
      un titre
     </li>
     <li>
      la carte
     </li>
     <li>
      une légende
     </li>
     <li>
      une flèche Nord
     </li>
     <li>
      une échelle
     </li>
     <li>
      les sources
     </li>
    </ul>
   </li>
   <li>
    <code>
     Projet
    </code>
    -&gt;
    <code>
     Nouvelle mise en page
    </code>
   </li>
  </ul>
  <h3>
   L'interface d'une mise en page
  </h3>
  <p>
   <img alt="Interface mise en page" src="./media/interface_mise_en_page.png"/>
  </p>
  <h3>
   Ajoutons les éléments de notre mise en page
  </h3>
  <p>
   <em>
    Note
   </em>
   , si vous le souhaitez, vous pouvez ouvrir le projet
   <code>
    X_PROJET_V3.qgs.qgz
   </code>
   pour obtenir plusieurs couches avec une symbologie.
  </p>
  <ul>
   <li>
    Ajoutons les éléments :
    <ul>
     <li>
      Une étiquette avec le titre de la carte. La modification du texte se fait dans les propriétés de l'étiquette.
     </li>
     <li>
      Une autre étiquette avec les sources cartographiques de notre carte.
     </li>
     <li>
      Une carte
     </li>
     <li>
      Une légende :
      <ul>
       <li>
        on peut filtrer la légende en cliquant sur le
        <code>
         filtre bleu
        </code>
        dans l'onglet `élément de la légende (image ci-dessous)
       </li>
      </ul>
     </li>
     <li>
      Une échelle
     </li>
     <li>
      Une flèche Nord, il s'agit d'une image simple, pour laquelle on va utiliser
      <br/>
      <code>
       Rechercher dans les répertoires
      </code>
      , dans ses propriétés, pour trouver une image adéquate)
     </li>
    </ul>
   </li>
  </ul>
  <p>
   <img alt="Filtrage légende" src="./media/filtrage_legende.png"/>
  </p>
  <ul>
   <li>
    Nous pouvons finaliser la carte en faisant un export PDF.
   </li>
  </ul>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js">
  </script>
  <script>
   hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
  <script type="text/javascript">
   MathJax.Hub.Config({"showProcessingMessages" : false,"messageStyle" : "none","tex2jax": { inlineMath: [ [ "$", "$" ] ] }});
  </script>
 </body>
</html>